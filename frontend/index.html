<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>NewsLens • Signals</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="assets/main.css" />
</head>
<body>
  <!-- Top bar + search -->
  <header class="topbar sticky">
    <div class="brand">⚡ NewsLens <span class="muted">Signals</span></div>
    <div class="searchbar">
      <input id="q" type="search" placeholder="Search IPO, JEE, Infosys, Cricket, Metro…" />
      <button id="qbtn">Search</button>
    </div>
  </header>

  <!-- Tabs -->
  <nav class="tabs">
    <button class="tab active" data-tab="home">Home</button>
    <button class="tab" data-tab="feed">Feed</button>
    <button class="tab" data-tab="habits">Habits</button>
    <button class="tab" data-tab="digest">My Digest</button>
  </nav>

  <!-- ===== HOME (Top 5) ===== -->
  <main id="home" class="view active">
    <section class="signals">
      <h2>Today’s Top 5 Signals</h2>
      <div id="signals" class="signals-row"></div>
    </section>

    <section class="preview">
      <div class="row">
        <h3 class="muted">Tips</h3>
        <span class="muted">Use the search bar above or jump to <b>Feed</b> for full filters.</span>
      </div>
    </section>
  </main>

  <!-- ===== FEED (kept) ===== -->
  <main id="feed" class="view">
    <header class="filters">
      <div class="step">
        <label>Timeline</label>
        <select id="days">
          <option value="">Select</option>
          <option value="1">Today</option>
          <option value="2" selected>Today + Yesterday</option>
          <option value="3">Last 3 days</option>
          <option value="5">Last 5 days</option>
          <option value="7">Last 7 days</option>
        </select>
      </div>

      <div class="step">
        <label>Scope</label>
        <select id="scope" disabled>
          <option value="national" selected>National</option>
          <option value="state">State</option>
        </select>
      </div>

      <div class="step">
        <label>State</label>
        <select id="state" disabled></select>
      </div>

      <div class="step">
        <label>Category</label>
        <select id="category" disabled>
          <option value="">All</option>
          <option value="politics">Politics</option>
          <option value="sports">Sports</option>
          <option value="education">Education</option>
          <option value="science">Science/Tech</option>
          <option value="business">Business</option>
          <option value="entertainment">Entertainment</option>
        </select>
      </div>

      <div class="step">
        <label>Mode</label>
        <select id="mode" disabled>
          <option value="light" selected>Fast</option>
          <option value="deep">Deep</option>
        </select>
      </div>

      <button id="refresh" class="primary" disabled>Refresh</button>
    </header>

    <section id="hero">
      <h1 id="headline">Pick a timeline to start</h1>
      <p class="sub">Step 1: Timeline → Step 2: Scope → Step 3: (if State) choose State → Step 4: Category.</p>
    </section>

    <section id="grid" class="grid"></section>
    <div id="empty" class="empty" style="display:none;">No news found for your filters.</div>
  </main>

  <!-- ===== HABITS (NEW) ===== -->
  <main id="habits" class="view">
    <section class="habits-header">
      <div class="left">
        <h2>Habits Tracker</h2>
        <div class="muted">Build consistency. Track daily check-ins with streaks & charts.</div>
      </div>
      <div class="right add-habit">
        <input id="habit-name" placeholder="Add a habit (e.g., Run, Read, Code)" />
        <input id="habit-color" type="color" value="#2563eb" title="Color" />
        <button id="habit-add" class="primary">Add</button>
      </div>
    </section>

    <section class="habits-board">
      <aside class="habits-list">
        <div class="row">
          <label for="habit-select">Your habits</label>
          <select id="habit-select"></select>
        </div>
        <div class="habit-actions">
          <button id="habit-rename" class="mini">Rename</button>
          <button id="habit-delete" class="mini danger">Delete</button>
        </div>
        <div class="stats">
          <div><span>Current streak</span><b id="stat-current">0</b></div>
          <div><span>Best streak</span><b id="stat-best">0</b></div>
          <div><span>This month</span><b id="stat-month">0%</b></div>
        </div>
        <canvas id="habit-chart" height="120"></canvas>
      </aside>

      <section class="calendar-wrap">
        <header class="cal-head">
          <button id="cal-prev" class="mini">◀</button>
          <h3 id="cal-title">Month YYYY</h3>
          <button id="cal-next" class="mini">▶</button>
        </header>
        <div class="cal-grid" id="cal-grid">
          <!-- days injected -->
        </div>
        <div class="muted small">Click a date to toggle done/undone. Data saved locally.</div>
      </section>
    </section>
  </main>

  <!-- ===== DIGEST ===== -->
  <main id="digest" class="view">
    <header class="row">
      <h2>My Digest</h2>
      <div class="followbar">
        <input id="follow-input" placeholder="Add term to follow (e.g., JEE, IPO)" />
        <button id="follow-add">Add</button>
      </div>
      <div id="follow-chips" class="chips"></div>
    </header>
    <section id="digest-grid" class="grid"></section>
    <div id="digest-empty" class="empty" style="display:none;">Nothing yet. Follow some terms above.</div>
  </main>

  <footer class="footer">
    <span>Made with ❤️ • FastAPI + Vanilla JS • <a href="#" target="_blank" rel="noopener">About</a></span>
  </footer>

  <script src="assets/app.js?v=2025-10-05-habits1"></script>
</body>
</html>
