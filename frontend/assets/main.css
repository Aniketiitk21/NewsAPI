/* ===========================
   NewsLens • Main Stylesheet
   =========================== */
:root{
  --bg:#0b0b0c;
  --card:#121316;
  --text:#f3f4f6;
  --muted:#9ca3af;
  --border:#1f2937;
  --chip-bg:#0f172a;
  --chip-border:#1f2937;
  --primary:#2563eb;
  --primary-ink:#ffffff;
  --accent:#3b82f6;
  --shadow: none;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
}
a{color:var(--accent)} a:hover{text-decoration:underline}
button{cursor:pointer}
.muted{color:var(--muted)}
.small{font-size:.85rem}

/* Layout container width */
body > header.topbar,
body > nav.tabs,
body > main.view,
body > .footer{max-width:1100px;margin:0 auto}

/* Topbar */
.topbar{
  display:flex; gap:12px; align-items:center; padding:10px 14px;
  background:#0f1115; border-bottom:1px solid var(--border);
}
.topbar .brand{font-weight:800; letter-spacing:.2px}
.topbar.sticky{position:sticky; top:0; z-index:20}
.searchbar{display:flex; gap:8px; flex:1}
.searchbar input,.searchbar button{
  height:38px; border:1px solid var(--border); background:#0d0f14; color:var(--text);
  border-radius:10px; padding:0 12px;
}

/* Tabs */
.tabs{
  display:flex; gap:8px; padding:8px 12px; border-bottom:1px solid var(--border);
  background:#0f1115; position:sticky; top:56px; z-index:15;
}
.tab{
  padding:8px 12px; border-radius:999px; border:1px solid var(--border);
  background:#0d0f14; color:#e5e7eb; font-weight:700;
}
.tab.active{background:var(--primary); border-color:var(--primary); color:#fff}
.view{display:none; padding:16px}
.view.active{display:block}

/* Buttons */
.primary{background:var(--primary); color:#fff; border:none; padding:8px 14px; border-radius:10px}
.mini{padding:4px 10px; border:1px solid var(--border); background:#0d0f14; color:var(--text); border-radius:8px}
.mini.danger{border-color:#7f1d1d; color:#fecaca;}

/* Filters (Feed) */
.filters{
  display:flex; flex-wrap:wrap; gap:12px; align-items:flex-end; padding:12px;
  margin:8px 0 4px; background:#0f1115; border:1px solid var(--border); border-radius:14px;
}
.filters .step{display:flex; flex-direction:column; gap:6px}
.filters label{font-size:.82rem; color:var(--muted)}
.filters select{
  min-width:160px; height:38px; border:1px solid var(--border); background:#0d0f14; color:var(--text); border-radius:10px; padding:6px 10px;
}

/* Hero */
#headline{margin:4px 0 6px}
.sub{color:var(--muted); margin:0 0 10px}

/* Grid & Cards */
.grid{display:grid; grid-template-columns:1fr; gap:12px}
@media (min-width:680px){ .grid{grid-template-columns:repeat(2,1fr)} }
@media (min-width:1040px){ .grid{grid-template-columns:repeat(3,1fr)} }

.card{
  background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px;
}
.card h3{margin:0 0 8px; line-height:1.25}
.card p{margin:8px 0 10px; color:#e5e7eb}
.card .meta{color:var(--muted); font-size:.85rem}
.card .actions{display:flex; gap:8px; margin-top:8px}

/* Chips */
.chips{display:flex; flex-wrap:wrap; gap:6px; margin:6px 0 4px}
.chip{background:var(--chip-bg); border:1px solid var(--chip-border); color:#dbeafe; border-radius:999px; padding:3px 8px; font-size:.78rem}
.chips .removable{background:#172554; border-color:#1e3a8a}

/* Empty */
.empty{margin:12px 0; padding:16px; text-align:center; color:var(--muted); border:1px dashed var(--border); border-radius:12px; background:#0f1115}

/* Footer */
.footer{padding:18px 16px; text-align:center; color:var(--muted)}

/* Home: Signals */
.signals h2{margin:8px 0 12px}
.signals-row{display:flex; gap:12px; overflow:auto; padding-bottom:6px; scroll-snap-type:x proximity}
.signal-card{
  min-width:280px; max-width:360px; flex:0 0 auto; background:#0f1115; border:1px solid var(--border); border-radius:16px; padding:12px; scroll-snap-align:start;
}
.signal-card h3{margin:0 0 8px; font-size:1rem}
.signal-card .btn{display:inline-block; padding:6px 10px; border:1px solid var(--border); border-radius:10px; background:#0d0f14}

/* Skeletons */
.skel{border:1px solid var(--border); border-radius:12px; padding:12px; background:#0f1115}
.skel .bar{height:10px; background:#1f2937; border-radius:6px; margin:8px 0}
.skel .w{width:80%}.skel .w2{width:60%}.skel .w3{width:40%}

/* ===== HABITS ===== */
.habits-header{
  display:flex; justify-content:space-between; align-items:center; gap:12px; margin:4px 0 12px;
}
.add-habit{display:flex; gap:8px; align-items:center}
.add-habit input[type="text"], .add-habit input[type="color"]{
  height:38px; border:1px solid var(--border); background:#0d0f14; color:var(--text); border-radius:10px; padding:0 12px;
}
.habits-board{display:grid; gap:16px; grid-template-columns: 280px 1fr}
@media (max-width:920px){ .habits-board{grid-template-columns:1fr} }

.habits-list{
  background:#0f1115; border:1px solid var(--border); border-radius:14px; padding:12px;
  display:flex; flex-direction:column; gap:12px;
}
.habits-list select{
  width:100%; height:38px; background:#0d0f14; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:0 8px;
}
.habit-actions{display:flex; gap:8px}
.stats{display:grid; gap:8px}
.stats > div{
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 10px; background:#0d0f14; border:1px solid var(--border); border-radius:10px;
}
#habit-chart{width:100%; background:#0d0f14; border:1px solid var(--border); border-radius:10px}

/* Calendar */
.calendar-wrap{
  background:#0f1115; border:1px solid var(--border); border-radius:14px; padding:12px;
}
.cal-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.cal-grid{
  display:grid; grid-template-columns: repeat(7, 1fr); gap:6px;
}
.cal-wd{
  text-align:center; color:var(--muted); font-weight:700; font-size:.85rem; padding:4px 0;
}
.cal-cell{
  border:1px dashed var(--border); min-height:54px; border-radius:10px; background:#0d0f14; color:var(--text);
}
.cal-cell.pad{opacity:.2}
.cal-cell.day{position:relative; display:flex; align-items:flex-start; justify-content:flex-end; padding:6px}
.cal-cell.day .num{opacity:.7; font-size:.85rem}
.cal-cell.day.done{ border-style:solid; border-color: color-mix(in oklab, var(--accent) 70%, black); background: rgba(37,99,235,.15); }
.cal-cell.day.done::after{
  content:"✓"; position:absolute; left:8px; bottom:6px; font-weight:900; color: var(--accent);
}

/* Utility rows */
.row{display:flex; justify-content:space-between; align-items:center}
.row-ends{display:flex; justify-content:space-between; align-items:center}

/* Preview wrapper */
.preview{
  background:#0f1115; border:1px solid var(--border); border-radius:14px; padding:12px;
}
